{"version":3,"file":"auth.service.js","sourceRoot":"","sources":["../../../../src/lib/services/auth.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable, signal, computed } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { delay, tap } from 'rxjs/operators';\nimport { AuthUser } from '../interfaces';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n  // Signals for reactive state management\n  private readonly userSignal = signal<AuthUser | null>(null);\n  private readonly tokenSignal = signal<string | null>(null);\n\n  // Computed values\n  readonly user = this.userSignal.asReadonly();\n  readonly token = this.tokenSignal.asReadonly();\n  readonly isAuthenticated = computed(() => this.tokenSignal() !== null);\n\n  constructor() {\n    // Restore session from localStorage on init\n    this.restoreSession();\n  }\n\n  /**\n   * Login with username and password\n   * (Mock implementation - replace with real API call)\n   */\n  login(email: string, password: string): Observable<AuthUser> {\n    // Mock login - replace with actual HTTP call\n    return of({\n      id: '1',\n      name: 'Demo User',\n      email,\n      role: 'Admin'\n    }).pipe(\n      delay(500), // Simulate API delay\n      tap(user => {\n        const mockToken = `mock-jwt-token-${Date.now()}`;\n        this.setSession(user, mockToken);\n      })\n    );\n  }\n\n  /**\n   * Logout and clear session\n   */\n  logout(): void {\n    this.clearSession();\n  }\n\n  /**\n   * Get the current auth token\n   */\n  getToken(): string | null {\n    return this.tokenSignal();\n  }\n\n  /**\n   * Check if user is authenticated\n   */\n  isLoggedIn(): boolean {\n    return this.isAuthenticated();\n  }\n\n  /**\n   * Set user session\n   */\n  private setSession(user: AuthUser, token: string): void {\n    this.userSignal.set(user);\n    this.tokenSignal.set(token);\n\n    // Persist to localStorage\n    localStorage.setItem('auth_user', JSON.stringify(user));\n    localStorage.setItem('auth_token', token);\n  }\n\n  /**\n   * Clear user session\n   */\n  private clearSession(): void {\n    this.userSignal.set(null);\n    this.tokenSignal.set(null);\n\n    // Clear localStorage\n    localStorage.removeItem('auth_user');\n    localStorage.removeItem('auth_token');\n  }\n\n  /**\n   * Restore session from localStorage\n   */\n  private restoreSession(): void {\n    const user = localStorage.getItem('auth_user');\n    const token = localStorage.getItem('auth_token');\n\n    if (user && token) {\n      try {\n        this.userSignal.set(JSON.parse(user));\n        this.tokenSignal.set(token);\n      } catch (error) {\n        this.clearSession();\n      }\n    }\n  }\n}"]}